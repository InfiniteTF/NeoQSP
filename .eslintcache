[{"/mnt/c/Users/Per/jsqsp/app/src/components/Actions.tsx":"1","/mnt/c/Users/Per/jsqsp/app/src/components/Main.tsx":"2","/mnt/c/Users/Per/jsqsp/app/src/components/app.tsx":"3","/mnt/c/Users/Per/jsqsp/app/src/components/loading-screen.tsx":"4","/mnt/c/Users/Per/jsqsp/app/src/components/startup.tsx":"5","/mnt/c/Users/Per/jsqsp/app/src/main/index.ts":"6","/mnt/c/Users/Per/jsqsp/app/src/renderer/index.tsx":"7","/mnt/c/Users/Per/jsqsp/app/src/store/store.ts":"8","/mnt/c/Users/Per/NeoQSP/src/asm/test.ts":"9","/mnt/c/Users/Per/NeoQSP/src/components/Actions.tsx":"10","/mnt/c/Users/Per/NeoQSP/src/components/Dialog.tsx":"11","/mnt/c/Users/Per/NeoQSP/src/components/State.tsx":"12","/mnt/c/Users/Per/NeoQSP/src/components/app.tsx":"13","/mnt/c/Users/Per/NeoQSP/src/components/game.tsx":"14","/mnt/c/Users/Per/NeoQSP/src/components/loading-screen.tsx":"15","/mnt/c/Users/Per/NeoQSP/src/components/startup.tsx":"16","/mnt/c/Users/Per/NeoQSP/src/main/index.ts":"17","/mnt/c/Users/Per/NeoQSP/src/renderer/Loader.tsx":"18","/mnt/c/Users/Per/NeoQSP/src/renderer/index.tsx":"19","/mnt/c/Users/Per/NeoQSP/src/store/store.ts":"20"},{"size":720,"mtime":1598650052960,"results":"21","hashOfConfig":"22"},{"size":11702,"mtime":1598649625294,"results":"23","hashOfConfig":"22"},{"size":6916,"mtime":1598648573549,"results":"24","hashOfConfig":"22"},{"size":490,"mtime":1598648531228,"results":"25","hashOfConfig":"22"},{"size":1046,"mtime":1598648490572,"results":"26","hashOfConfig":"22"},{"size":1664,"mtime":1597577865261,"results":"27","hashOfConfig":"22"},{"size":224,"mtime":1597336439040,"results":"28","hashOfConfig":"22"},{"size":1095,"mtime":1597336439050,"results":"29","hashOfConfig":"22"},{"size":16675,"mtime":1600428404989,"results":"30","hashOfConfig":"31"},{"size":689,"mtime":1600427621474,"results":"32","hashOfConfig":"31"},{"size":2523,"mtime":1600428405177,"results":"33","hashOfConfig":"31"},{"size":4878,"mtime":1600428405381,"results":"34","hashOfConfig":"31"},{"size":4838,"mtime":1600428405134,"results":"35","hashOfConfig":"31"},{"size":6889,"mtime":1600428405216,"results":"36","hashOfConfig":"31"},{"size":490,"mtime":1600427621460,"results":"37","hashOfConfig":"31"},{"size":961,"mtime":1600428405348,"results":"38","hashOfConfig":"31"},{"size":1892,"mtime":1600428405421,"results":"39","hashOfConfig":"31"},{"size":607,"mtime":1600428406159,"results":"40","hashOfConfig":"31"},{"size":217,"mtime":1600427621527,"results":"41","hashOfConfig":"31"},{"size":1095,"mtime":1600427621538,"results":"42","hashOfConfig":"31"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"i9xz5u",{"filePath":"45","messages":"46","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47"},{"filePath":"48","messages":"49","errorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"50"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","errorCount":18,"warningCount":23,"fixableErrorCount":12,"fixableWarningCount":0,"source":null},"u5c1kh",{"filePath":"63","messages":"64","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"65","messages":"66","errorCount":6,"warningCount":1,"fixableErrorCount":1,"fixableWarningCount":0,"source":null},{"filePath":"67","messages":"68","errorCount":7,"warningCount":0,"fixableErrorCount":4,"fixableWarningCount":0,"source":null},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","errorCount":16,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/mnt/c/Users/Per/jsqsp/app/src/components/Actions.tsx",["85"],"/mnt/c/Users/Per/jsqsp/app/src/components/Main.tsx",["86"],"/* eslint-disable no-bitwise */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n\nimport React, { useCallback, useRef, useState, useEffect } from \"react\";\nimport { Buffer } from \"buffer\";\nimport { Howl } from \"howler\";\nimport { Mosaic, MosaicWindow } from \"react-mosaic-component\";\nimport Swal from \"sweetalert2\";\nimport { dirname, normalize } from \"path\";\nimport { runQSP, readQSP } from \"../../../lib/src/main\";\nimport { Action, Variable } from \"../../../lib/src/state\";\nimport { ICallback } from \"../../../lib/src/runqsp\";\n\nimport Actions from \"./Actions\";\n\nimport \"react-mosaic-component/react-mosaic-component.css\";\n\nconst ViewModal = Swal.mixin({\n  animation: false,\n  width: \"inherit\",\n});\n\nconst showMessage = (text: string) =>\n  ViewModal.fire({\n    html: text,\n  });\n\nconst InputModal = Swal.mixin({\n  animation: false,\n  input: \"text\",\n  showCancelButton: true,\n  allowOutsideClick: false,\n  customClass: {\n    confirmButton: \"btn btn-primary\",\n    cancelButton: \"btn btn-secondary\",\n  },\n});\n\ntype EventHandler = (callback: ICallback) => void;\n\ninterface Game {\n  selectAction: (index: number) => void;\n  execCommand: (command: string) => void;\n  getMainWindow: () => string;\n  getAdditionalWindow: () => string;\n  getActions: () => Action[];\n  getUIProperties: () => UIProperties;\n  saveGame: (value: string) => void;\n  loadGame: (value: string) => void;\n  showStat: () => boolean;\n  showObjects: () => void;\n  getVariable: (name: string, shouldCreate?: boolean) => Variable;\n  getVariableNames: () => void;\n  getLocation: () => void;\n  start: () => void;\n  sendInput: (text: string) => void;\n  resetGame: () => void;\n  closeGame: () => void;\n  setEventHandler: (handler: EventHandler) => void;\n}\n\nexport interface GameState {\n  game: Game;\n  filename: string;\n}\n\ninterface UIProperties {\n  fcolor: number;\n  bcolor: number;\n  lcolor: number;\n  fsize: number;\n  fname: string;\n}\n\nconst unpackColor = (color: number) => {\n  const r = color & 255;\n  const g = (color >> 8) & 255;\n  const b = (color >> 16) & 255;\n  const a = (color >> 24) & 255;\n  return `rgba(${r},${g},${b},${a})`;\n};\n\nlet propCache: UIProperties = {\n  fcolor: 0,\n  bcolor: 0,\n  lcolor: 0,\n  fsize: 0,\n  fname: \"\",\n};\nconst setUIProperties = (props: UIProperties) => {\n  if (\n    props.fcolor === propCache.fcolor &&\n    props.lcolor === propCache.lcolor &&\n    props.bcolor === propCache.bcolor &&\n    props.fname === propCache.fname &&\n    props.fsize === propCache.fsize\n  )\n    return;\n  propCache = props;\n  const rules = (document.styleSheets[0] as CSSStyleSheet).cssRules;\n  (rules[0] as CSSStyleRule).style.color =\n    props.lcolor === 0 ? \"inherit\" : unpackColor(props.lcolor);\n  (rules[1] as CSSStyleRule).style.color =\n    props.fcolor === 0 ? \"inherit\" : unpackColor(props.fcolor);\n  (rules[1] as CSSStyleRule).style.backgroundColor =\n    props.bcolor === 0 ? \"inherit\" : unpackColor(props.bcolor);\n  (rules[1] as CSSStyleRule).style.fontFamily = props.fname;\n  (rules[1] as CSSStyleRule).style.fontSize = props.fsize.toString();\n};\n\ninterface DialogWindowProps {\n  id: string;\n  title: string;\n  text: string;\n  show: boolean;\n  execCommand: (command: string) => void;\n}\n\nconst DialogWindow: React.FC<DialogWindowProps> = ({\n  id,\n  text,\n  show,\n  execCommand,\n}) => {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const content = text.replace(/\\n/g, \"<br>\");\n\n  useEffect(() => {\n    if (containerRef.current) {\n      const videos = containerRef.current.getElementsByTagName(\"video\");\n      [...videos].forEach((video) => video.play());\n    }\n  });\n\n  const captureClicks = (e: React.MouseEvent) => {\n    const anchor = e.currentTarget.closest(\"a\");\n    if (anchor && containerRef.current?.contains(anchor)) {\n      e.preventDefault();\n\n      const command = anchor.href;\n      if (command.slice(0, 5).toLowerCase() === \"exec:\")\n        execCommand(command.slice(5));\n    }\n  };\n\n  if (!show) return null;\n\n  return (\n    <div\n      id={id}\n      ref={containerRef}\n      className=\"col-sm col-sm-3\"\n      onClick={captureClicks}\n      dangerouslySetInnerHTML={{ __html: content }}\n    />\n  );\n};\n\nexport const GameInstance: React.FC<{ gameState: GameState }> = ({\n  gameState,\n}) => {\n  const [mainWindow, setMainWindow] = useState<string>(\"\");\n  const [additionalWindow, setAdditionalWindow] = useState<string>(\"\");\n  const [showAdditionalWindow, setShowAdditionalWindow] = useState<boolean>(\n    false\n  );\n  const [actions, setActions] = useState<Action[]>([]);\n  const [buttonsDisabled, setButtonsDisabled] = useState(true);\n  const AudioIndex = useRef<Record<string, Howl>>({});\n\n  const { game } = gameState;\n\n  const refresh = useCallback(() => {\n    setUIProperties(game.getUIProperties());\n    setMainWindow(game.getMainWindow());\n    setAdditionalWindow(game.getAdditionalWindow());\n    setShowAdditionalWindow(game.showStat());\n    setActions(game.getActions());\n    setButtonsDisabled(false);\n  }, [game]);\n\n  const eventHandler = useCallback((event: ICallback) => {\n    switch (event.type) {\n      case \"VIEW\":\n        if (event.value)\n          ViewModal.fire({\n            imageUrl: event.value,\n          });\n        // Do nothing if asked to close VIEW since it doesn't make sense with a modal\n        return;\n      case \"MSG\":\n        showMessage(event.value);\n        return;\n      /*\n             case(\"PROMPT_LOAD\"): {\n                dialog.showOpenDialog(null, {\n                    title: \"Select save game file...\",\n                    filters: [{name: \"jsQSP Save Game\", extensions: ['jqsav']}],\n                    properties: ['openFile']\n                }).then(res => {\n                    if(res.filePaths && res.filePaths.length)\n                    readFile(res.filePaths[0]).then(data => (GameInstance.loadGame(data.toString())));\n                });\n                return;\n            }\n            case(\"PROMPT_SAVE\"): {\n                dialog.showSaveDialog(null, {\n                    title: \"Select save game file...\",\n                    filters: [{name: \"jsQSP Save Game\", extensions: ['jqsav']}],\n                    properties: ['openFile']\n                }).then(res => {\n                    if(res.filePath)\n                    GameInstance.saveGame(res.filePath);\n                    })\n                return;\n            }\n            case(\"LOAD\"):\n                const loadfile = join(dirname(filename), parse(event.value).name + '.jqsav');\n                readFile(loadfile).then(\n                    data => (GameInstance.loadGame(data.toString())),\n                    error => (showMessage(`Savegame ${loadfile} not found.`))\n                );\n                return;\n            case(\"SAVE\"):\n                const savefile = join(dirname(filename), parse(event.value).name + '.jqsav');\n                writeFile(savefile, event.data);\n                return;\n             */\n      case \"INPUT\": {\n        InputModal.fire({\n          html: event.value,\n        }).then((data) => {\n          const input = (data.value as string) ?? \"\";\n          game.sendInput(input);\n        });\n        break;\n      }\n      case \"DELAY\": {\n        setTimeout(() => game.start(), event.value);\n        break;\n      }\n      case \"PLAY\": {\n        const volume = event.data / 100;\n        AudioIndex.current[event.value] = new Howl({\n          src: [`./${event.value}`],\n          volume: volume > 1 ? 1 : volume,\n          autoplay: true,\n          onstop: () => {\n            delete AudioIndex.current[event.value];\n          },\n        });\n        break;\n      }\n      case \"KILL_AUDIOFILE\": {\n        if (AudioIndex.current[event.value]) {\n          AudioIndex.current[event.value].stop();\n          delete AudioIndex.current[event.value];\n        }\n        break;\n      }\n      case \"KILL_AUDIO\": {\n        Object.keys(AudioIndex.current).forEach((path) => {\n          AudioIndex.current[path].stop();\n        });\n        AudioIndex.current = {};\n        break;\n      }\n      /*\n            case(\"ADDQST\"):\n                const gameFile = join(dirname(filename), event.value);\n                readFile(gameFile).then(\n                    data => {\n                        const locations = readQSP(Buffer.from(data));\n                        GameInstance.addLocations(locations);\n                        GameInstance.start();\n                    },\n                    error => (showMessage(`Game file '${loadfile}' not found.`))\n                );\n                return;\n             */\n      default:\n        refresh();\n    }\n  }, [game, refresh]);\n\n  useEffect(() => {\n    const baseEl =\n      document.getElementsByTagName(\"base\").length > 0\n        ? document.getElementsByTagName(\"base\")[0]\n        : document.createElement(\"base\");\n    const path = normalize(`${dirname(gameState.filename)}/`);\n    baseEl.href = `file://${path}`;\n  }, [gameState.filename]);\n\n  useEffect(() => game.setEventHandler(eventHandler), [game, eventHandler]);\n\n  const loadFile = async (e: React.FormEvent<HTMLInputElement>) => {\n    const file = e.currentTarget?.files?.[0];\n    if (!file) return;\n\n    game.loadGame(await file.text());\n  };\n\n  const selectAction = (index: number) => {\n    setButtonsDisabled(true);\n    game.selectAction(index);\n  };\n\n  const main = (\n    <DialogWindow\n      id=\"dialogwindow\"\n      title=\"Main desc\"\n      text={mainWindow}\n      show\n      execCommand={game.execCommand}\n    />\n  );\n  const action = (\n    <Actions\n      actions={actions}\n      selectAction={selectAction}\n      disabled={buttonsDisabled}\n    />\n  );\n  const additional = (\n    <DialogWindow\n      id=\"additionalwindow\"\n      title=\"Additional desc\"\n      text={additionalWindow}\n      show={showAdditionalWindow}\n      execCommand={game.execCommand}\n    />\n  );\n\n  const windowMap: Record<string, JSX.Element> = {\n    main,\n    action,\n    additional,\n  };\n\n  const windowTitleMap: Record<string, string> = {\n    main: \"Main desc\",\n    action: \"Actions\",\n    additional: \"Additional desc\",\n  };\n\n  return (\n    <>\n      <Mosaic<string>\n        renderTile={(id, path) => {\n          if (id === \"main\") return main;\n          return (\n            <MosaicWindow<string> path={path} title={windowTitleMap[id]}>\n              {windowMap[id]}\n            </MosaicWindow>\n          );\n        }}\n        initialValue={{\n          direction: \"column\",\n          splitPercentage: 75,\n          first: {\n            direction: \"row\",\n            splitPercentage: 75,\n            first: \"main\",\n            second: \"additional\",\n          },\n          second: \"action\",\n        }}\n      />\n      <div className=\"row\">\n        <button type=\"button\" onClick={() => game.saveGame(\"test\")}>\n          Save game\n        </button>\n        <button type=\"button\" onClick={() => game.loadGame(\"test\")}>\n          Load game\n        </button>\n        <input type=\"file\" accept=\".dat\" onChange={loadFile} />\n      </div>\n    </>\n  );\n};\n\nconst Sveta: React.FC = () => {\n  const [gameState, setGameState] = useState<GameState>();\n  useEffect(() => {\n    if (gameState) gameState.game.start();\n  }, [gameState]);\n\n  const openFile = async (event: React.FormEvent<HTMLInputElement>) => {\n    const input = event.currentTarget;\n    if (!input.files?.[0]) return;\n\n    const arrayBuffer = await input.files[0].arrayBuffer();\n    const buffer = Buffer.from(arrayBuffer);\n    const locations = readQSP(buffer);\n    const game = runQSP(locations);\n    setGameState({ game, filename: input.files[0].name });\n  };\n\n  return (\n    <>\n      <h5>Sveta</h5>\n      <input type=\"file\" accept=\".qsp\" onChange={openFile} />\n      {gameState && <GameInstance gameState={gameState} />}\n    </>\n  );\n};\n\nexport default Sveta;\n","/mnt/c/Users/Per/jsqsp/app/src/components/app.tsx",["87"],"import React, { useReducer, useEffect, useState } from \"react\";\nimport { readFile } from \"fs-extra\";\nimport { basename } from \"path\";\nimport { debounce } from \"lodash\";\nimport { OpenDialogReturnValue } from 'electron';\n\nimport Startup from \"./startup\";\nimport { GameInstance, GameState } from \"./Main\";\nimport LoadingScreen from \"./loading-screen\";\nimport Store from \"../store/store\";\nimport { readQSP, runQSP } from \"../../../lib/src/main\";\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst Electron = require(\"electron\").remote;\n\nconst { app, Menu, dialog } = Electron;\napp.commandLine.appendSwitch(\"autoplay-policy\", \"no-user-gesture-required\");\n\nlet menu: Electron.Menu;\nconst electronWindow = Electron.getCurrentWindow();\n\nconst saveWindowGeometry = () => {\n  const { width, height, x, y } = electronWindow.getBounds();\n  Store.set({\n    geometry: {\n      width,\n      height,\n      x,\n      y,\n    },\n  });\n};\nelectronWindow.addListener(\"resize\", debounce(saveWindowGeometry, 500));\nelectronWindow.addListener(\"moved\", debounce(saveWindowGeometry, 500));\n\ninterface AppState {\n  status: string;\n  currentGame?: string;\n  recent: string[];\n  geometry: {\n    width: number;\n    height: number;\n    x: number;\n    y: number;\n  };\n}\n\nexport interface AppAction {\n  filename?: string;\n  type: string;\n}\n\nfunction reducer(prevState: AppState, action: AppAction): AppState {\n  switch (action.type) {\n    case \"OPEN_GAME\": {\n      const recents = [\n        action.filename,\n        ...prevState.recent.filter((f) => f !== action.filename),\n      ];\n      Store.set(\"recent\", recents);\n      return {\n        ...prevState,\n        recent: recents as string[],\n        status: \"LOADING_GAME\",\n        currentGame: action.filename,\n      };\n    }\n    case \"GAME_LOADED\": {\n      return {\n        ...prevState,\n        status: \"PLAYING\",\n      };\n    }\n    case \"CLOSE_GAME\": {\n      return {\n        ...prevState,\n        status: \"IDLE\",\n        currentGame: undefined,\n      };\n    }\n    default:\n      return prevState;\n  }\n}\n\nconst defaultState = {\n  status: \"IDLE\",\n  currentGame: undefined,\n  recent: [],\n};\n\nconst Sveta: React.FC = () => {\n  const [state, dispatch] = useReducer(reducer, {\n    ...defaultState,\n    ...Store.store,\n  });\n  const [gameState, setGameState] = useState<GameState>();\n\n  useEffect(() => {\n    if (gameState) gameState.game.start();\n  }, [gameState]);\n\n  function onDrop(this: HTMLElement, event: DragEvent) {\n    event.preventDefault();\n    if (event.dataTransfer && event.dataTransfer.files.length > 0) {\n      const file = event.dataTransfer.files[0];\n      if (file.name.slice(-3) === \"qsp\")\n        dispatch({ type: \"OPEN_GAME\", filename: file.path });\n    }\n  }\n\n  function onDragEvent(this: Document, event: DragEvent) {\n    event.preventDefault();\n  }\n\n  useEffect(() => {\n    if (document.getElementsByTagName(\"title\").length === 0) {\n      const titleElement = document.createElement(\"title\");\n      document.getElementsByTagName(\"head\")[0].appendChild(titleElement);\n    }\n\n    if (state.currentGame) {\n      document.getElementsByTagName(\"title\")[0].innerHTML = `${basename(\n        state.currentGame\n      )} — jsQSP`;\n\n      readFile(state.currentGame).then((data) => {\n        const locations = readQSP(Buffer.from(data));\n        const game = runQSP(locations);\n        game.start();\n        setGameState({ game, filename: state.currentGame ?? \"\" });\n        dispatch({ type: \"GAME_LOADED\" });\n      });\n    } else\n      document.getElementsByTagName(\"title\")[0].innerHTML = \"jsQSP\";\n  }, [state.currentGame]);\n\n  useEffect(() => {\n    document.addEventListener(\"dragenter\", onDragEvent);\n    document.addEventListener(\"dragover\", onDragEvent);\n    document.body.addEventListener(\"drop\", onDrop);\n\n    menu = Menu.buildFromTemplate([\n      {\n        label: \"File\",\n        submenu: [\n          {\n            label: \"Open Game...\",\n            id: \"menu-open\",\n            click: () => {\n              dialog\n                .showOpenDialog({\n                  title: \"Select game to open...\",\n                  filters: [{ name: \"QSP game file\", extensions: [\"qsp\"] }],\n                  properties: [\"openFile\"],\n                })\n                .then((res: OpenDialogReturnValue) => {\n                  if (res.filePaths && res.filePaths.length) {\n                    if (gameState) {\n                      gameState.game.closeGame();\n                      dispatch({ type: \"CLOSE_GAME\" });\n                    }\n                    dispatch({ type: \"OPEN_GAME\", filename: res.filePaths[0] });\n                  }\n                });\n            },\n          },\n          {\n            label: \"Restart Game\",\n            id: \"menu-restart\",\n            enabled: false,\n            click: () => {\n              gameState?.game.resetGame();\n            },\n          },\n          {\n            label: \"Close Game\",\n            id: \"menu-close\",\n            enabled: false,\n            click: () => {\n              gameState?.game.closeGame();\n              dispatch({ type: \"CLOSE_GAME\" });\n            },\n          },\n          { type: \"separator\" },\n          {\n            label: \"Exit\",\n            click() {\n              app.quit();\n            },\n          },\n        ],\n      },\n      {\n        label: \"Game\",\n        submenu: [\n          {\n            label: \"Load saved game...\",\n            id: \"game-load\",\n            enabled: false,\n            click: () => {},\n            // click: promptLoad\n          },\n          {\n            label: \"Save game...\",\n            id: \"game-save\",\n            enabled: false,\n            click: () => {},\n            // click: promptSave\n          },\n        ],\n      },\n    ]);\n    Menu.setApplicationMenu(menu);\n\n    electronWindow.setBounds(state.geometry);\n    electronWindow.show();\n\n    return () => {\n      document.removeEventListener(\"dragenter\", onDragEvent);\n      document.removeEventListener(\"dragover\", onDragEvent);\n      document.body.removeEventListener(\"drop\", onDrop);\n    };\n  }, []);\n\n  useEffect(() => {\n    gameState?.game.start();\n  }, [gameState]);\n\n  useEffect(() => {\n    const status = state.status !== \"IDLE\";\n    menu.getMenuItemById(\"menu-restart\").enabled = status;\n    menu.getMenuItemById(\"menu-close\").enabled = status;\n    menu.getMenuItemById(\"game-save\").enabled = status;\n    menu.getMenuItemById(\"game-load\").enabled = status;\n  }, [state.status]);\n\n  // const promptLoad = () => gameState?.game.promptLoad({type: \"PROMPT_LOAD\"});\n  // const promptSave = () => gameState?.game.eve.eventHandler({type: \"PROMPT_SAVE\"});\n\n  if (gameState)\n    return <GameInstance gameState={gameState} />;\n  if (state.status === \"IDLE\")\n    return <Startup recentFiles={state.recent} dispatch={dispatch} />;\n  if (state.status === \"LOADING_GAME\" && state.currentGame)\n    return <LoadingScreen filename={state.currentGame} />;\n  return <div>error</div>;\n}\n\nexport default Sveta;\n","/mnt/c/Users/Per/jsqsp/app/src/components/loading-screen.tsx",[],"/mnt/c/Users/Per/jsqsp/app/src/components/startup.tsx",[],"/mnt/c/Users/Per/jsqsp/app/src/main/index.ts",[],"/mnt/c/Users/Per/jsqsp/app/src/renderer/index.tsx",[],"/mnt/c/Users/Per/jsqsp/app/src/store/store.ts",[],"/mnt/c/Users/Per/NeoQSP/src/asm/test.ts",["88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128"],"/mnt/c/Users/Per/NeoQSP/src/components/Actions.tsx",["129"],"/mnt/c/Users/Per/NeoQSP/src/components/Dialog.tsx",["130","131","132","133","134","135","136"],"/mnt/c/Users/Per/NeoQSP/src/components/State.tsx",["137","138","139","140","141","142","143"],"/mnt/c/Users/Per/NeoQSP/src/components/app.tsx",[],"/mnt/c/Users/Per/NeoQSP/src/components/game.tsx",["144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162"],"/mnt/c/Users/Per/NeoQSP/src/components/loading-screen.tsx",[],"/mnt/c/Users/Per/NeoQSP/src/components/startup.tsx",[],"/mnt/c/Users/Per/NeoQSP/src/main/index.ts",[],"/mnt/c/Users/Per/NeoQSP/src/renderer/Loader.tsx",[],"/mnt/c/Users/Per/NeoQSP/src/renderer/index.tsx",[],"/mnt/c/Users/Per/NeoQSP/src/store/store.ts",[],{"ruleId":"163","severity":1,"message":"164","line":25,"column":11,"nodeType":"165","endLine":25,"endColumn":61},{"ruleId":"163","severity":1,"message":"164","line":155,"column":7,"nodeType":"165","endLine":155,"endColumn":52},{"ruleId":"166","severity":2,"message":"167","line":223,"column":6,"nodeType":"168","endLine":223,"endColumn":8,"suggestions":"169"},{"ruleId":"170","severity":2,"message":"171","line":69,"column":5,"nodeType":"172","messageId":"173","endLine":69,"endColumn":21,"fix":"174"},{"ruleId":"175","severity":1,"message":"176","line":98,"column":9,"nodeType":"177","messageId":"178","endLine":98,"endColumn":26},{"ruleId":"179","severity":2,"message":"180","line":141,"column":20,"nodeType":"177","messageId":"181","endLine":141,"endColumn":31},{"ruleId":"179","severity":2,"message":"182","line":146,"column":21,"nodeType":"177","messageId":"181","endLine":146,"endColumn":32},{"ruleId":"179","severity":2,"message":"183","line":151,"column":23,"nodeType":"177","messageId":"181","endLine":151,"endColumn":33},{"ruleId":"179","severity":2,"message":"184","line":156,"column":23,"nodeType":"177","messageId":"181","endLine":156,"endColumn":33},{"ruleId":"175","severity":1,"message":"185","line":161,"column":25,"nodeType":"177","messageId":"178","endLine":161,"endColumn":37},{"ruleId":"175","severity":1,"message":"186","line":161,"column":39,"nodeType":"177","messageId":"178","endLine":161,"endColumn":55},{"ruleId":"175","severity":1,"message":"187","line":165,"column":19,"nodeType":"177","messageId":"178","endLine":165,"endColumn":34},{"ruleId":"175","severity":1,"message":"188","line":165,"column":36,"nodeType":"177","messageId":"178","endLine":165,"endColumn":49},{"ruleId":"175","severity":1,"message":"189","line":169,"column":18,"nodeType":"177","messageId":"178","endLine":169,"endColumn":33},{"ruleId":"190","severity":2,"message":"191","line":178,"column":13,"nodeType":"177","messageId":"192","endLine":178,"endColumn":20},{"ruleId":"175","severity":1,"message":"193","line":186,"column":19,"nodeType":"177","messageId":"178","endLine":186,"endColumn":29},{"ruleId":"175","severity":1,"message":"193","line":190,"column":23,"nodeType":"177","messageId":"178","endLine":190,"endColumn":33},{"ruleId":"175","severity":1,"message":"189","line":194,"column":27,"nodeType":"177","messageId":"178","endLine":194,"endColumn":42},{"ruleId":"175","severity":1,"message":"194","line":198,"column":19,"nodeType":"177","messageId":"178","endLine":198,"endColumn":34},{"ruleId":"175","severity":1,"message":"195","line":202,"column":20,"nodeType":"177","messageId":"178","endLine":202,"endColumn":34},{"ruleId":"175","severity":1,"message":"194","line":213,"column":23,"nodeType":"177","messageId":"178","endLine":213,"endColumn":38},{"ruleId":"175","severity":1,"message":"196","line":213,"column":40,"nodeType":"177","messageId":"178","endLine":213,"endColumn":58},{"ruleId":"175","severity":1,"message":"194","line":217,"column":29,"nodeType":"177","messageId":"178","endLine":217,"endColumn":44},{"ruleId":"175","severity":1,"message":"194","line":221,"column":29,"nodeType":"177","messageId":"178","endLine":221,"endColumn":44},{"ruleId":"175","severity":1,"message":"197","line":225,"column":21,"nodeType":"177","messageId":"178","endLine":225,"endColumn":36},{"ruleId":"175","severity":1,"message":"197","line":229,"column":23,"nodeType":"177","messageId":"178","endLine":229,"endColumn":38},{"ruleId":"175","severity":1,"message":"198","line":229,"column":40,"nodeType":"177","messageId":"178","endLine":229,"endColumn":54},{"ruleId":"175","severity":1,"message":"197","line":233,"column":24,"nodeType":"177","messageId":"178","endLine":233,"endColumn":39},{"ruleId":"199","severity":2,"message":"200","line":290,"column":5,"nodeType":"201","messageId":"202","endLine":290,"endColumn":47,"fix":"203"},{"ruleId":"199","severity":2,"message":"200","line":302,"column":5,"nodeType":"201","messageId":"202","endLine":302,"endColumn":38,"fix":"204"},{"ruleId":"175","severity":1,"message":"205","line":313,"column":9,"nodeType":"177","messageId":"178","endLine":313,"endColumn":23},{"ruleId":"199","severity":2,"message":"200","line":314,"column":5,"nodeType":"201","messageId":"202","endLine":314,"endColumn":39,"fix":"206"},{"ruleId":"179","severity":2,"message":"207","line":326,"column":34,"nodeType":"177","messageId":"181","endLine":326,"endColumn":46},{"ruleId":"175","severity":1,"message":"208","line":346,"column":9,"nodeType":"177","messageId":"178","endLine":346,"endColumn":23},{"ruleId":"199","severity":2,"message":"200","line":347,"column":5,"nodeType":"201","messageId":"202","endLine":347,"endColumn":39,"fix":"209"},{"ruleId":"199","severity":2,"message":"200","line":366,"column":5,"nodeType":"201","messageId":"202","endLine":366,"endColumn":40,"fix":"210"},{"ruleId":"199","severity":2,"message":"200","line":378,"column":5,"nodeType":"201","messageId":"202","endLine":378,"endColumn":40,"fix":"211"},{"ruleId":"199","severity":2,"message":"200","line":413,"column":5,"nodeType":"201","messageId":"202","endLine":413,"endColumn":38,"fix":"212"},{"ruleId":"175","severity":1,"message":"213","line":437,"column":9,"nodeType":"177","messageId":"178","endLine":437,"endColumn":22},{"ruleId":"199","severity":2,"message":"200","line":438,"column":5,"nodeType":"201","messageId":"202","endLine":438,"endColumn":38,"fix":"214"},{"ruleId":"175","severity":1,"message":"215","line":481,"column":9,"nodeType":"177","messageId":"178","endLine":481,"endColumn":22},{"ruleId":"199","severity":2,"message":"200","line":482,"column":5,"nodeType":"201","messageId":"202","endLine":482,"endColumn":38,"fix":"216"},{"ruleId":"217","severity":2,"message":"218","line":508,"column":5,"nodeType":"219","messageId":"220","fix":"221"},{"ruleId":"217","severity":2,"message":"218","line":517,"column":5,"nodeType":"219","messageId":"220","fix":"222"},{"ruleId":"163","severity":1,"message":"164","line":20,"column":13,"nodeType":"165","endLine":20,"endColumn":62},{"ruleId":"175","severity":1,"message":"223","line":1,"column":36,"nodeType":"177","messageId":"178","endLine":1,"endColumn":44},{"ruleId":"190","severity":2,"message":"224","line":34,"column":36,"nodeType":"177","messageId":"192","endLine":34,"endColumn":57},{"ruleId":"217","severity":2,"message":"218","line":42,"column":7,"nodeType":"219","messageId":"220","fix":"225"},{"ruleId":"190","severity":2,"message":"224","line":45,"column":38,"nodeType":"177","messageId":"192","endLine":45,"endColumn":40},{"ruleId":"190","severity":2,"message":"224","line":51,"column":38,"nodeType":"177","messageId":"192","endLine":51,"endColumn":40},{"ruleId":"226","severity":2,"message":"227","line":53,"column":15,"nodeType":"177","messageId":"228","endLine":53,"endColumn":17},{"ruleId":"166","severity":2,"message":"229","line":74,"column":6,"nodeType":"168","endLine":74,"endColumn":12,"suggestions":"230"},{"ruleId":"231","severity":2,"message":"232","line":109,"column":41,"nodeType":"233","messageId":"234"},{"ruleId":"235","severity":2,"message":"236","line":110,"column":5,"nodeType":"237","messageId":"238","endLine":129,"endColumn":6},{"ruleId":"199","severity":2,"message":"200","line":145,"column":5,"nodeType":"201","messageId":"202","endLine":145,"endColumn":38,"fix":"239"},{"ruleId":"199","severity":2,"message":"200","line":146,"column":5,"nodeType":"201","messageId":"202","endLine":146,"endColumn":64,"fix":"240"},{"ruleId":"199","severity":2,"message":"200","line":147,"column":5,"nodeType":"201","messageId":"202","endLine":147,"endColumn":40,"fix":"241"},{"ruleId":"199","severity":2,"message":"200","line":148,"column":5,"nodeType":"201","messageId":"202","endLine":148,"endColumn":58,"fix":"242"},{"ruleId":"190","severity":2,"message":"243","line":167,"column":28,"nodeType":"177","messageId":"192","endLine":167,"endColumn":70},{"ruleId":"175","severity":1,"message":"244","line":3,"column":10,"nodeType":"177","messageId":"178","endLine":3,"endColumn":14},{"ruleId":"245","severity":2,"message":"246","line":14,"column":13,"nodeType":"247","messageId":"248","endLine":14,"endColumn":24},{"ruleId":"245","severity":2,"message":"246","line":15,"column":13,"nodeType":"247","messageId":"248","endLine":15,"endColumn":31},{"ruleId":"245","severity":2,"message":"249","line":15,"column":14,"nodeType":"247","messageId":"248","endLine":15,"endColumn":24},{"ruleId":"245","severity":2,"message":"246","line":16,"column":13,"nodeType":"247","messageId":"248","endLine":16,"endColumn":32},{"ruleId":"245","severity":2,"message":"249","line":16,"column":14,"nodeType":"247","messageId":"248","endLine":16,"endColumn":25},{"ruleId":"245","severity":2,"message":"246","line":17,"column":13,"nodeType":"247","messageId":"248","endLine":17,"endColumn":32},{"ruleId":"245","severity":2,"message":"249","line":17,"column":14,"nodeType":"247","messageId":"248","endLine":17,"endColumn":25},{"ruleId":"175","severity":1,"message":"250","line":21,"column":10,"nodeType":"177","messageId":"178","endLine":21,"endColumn":25},{"ruleId":"251","severity":2,"message":"252","line":21,"column":33,"nodeType":"253","messageId":"254","endLine":21,"endColumn":36,"suggestions":"255"},{"ruleId":"256","severity":2,"message":"257","line":23,"column":18,"nodeType":"247","messageId":"248","endLine":23,"endColumn":20},{"ruleId":"256","severity":2,"message":"257","line":24,"column":18,"nodeType":"247","messageId":"248","endLine":24,"endColumn":20},{"ruleId":"256","severity":2,"message":"257","line":25,"column":18,"nodeType":"247","messageId":"248","endLine":25,"endColumn":20},{"ruleId":"256","severity":2,"message":"257","line":26,"column":17,"nodeType":"247","messageId":"248","endLine":26,"endColumn":19},{"ruleId":"256","severity":2,"message":"257","line":27,"column":17,"nodeType":"247","messageId":"248","endLine":27,"endColumn":19},{"ruleId":"256","severity":2,"message":"257","line":33,"column":18,"nodeType":"247","messageId":"248","endLine":33,"endColumn":20},{"ruleId":"256","severity":2,"message":"257","line":35,"column":18,"nodeType":"247","messageId":"248","endLine":35,"endColumn":20},{"ruleId":"256","severity":2,"message":"257","line":39,"column":18,"nodeType":"247","messageId":"248","endLine":39,"endColumn":20},{"ruleId":"175","severity":1,"message":"258","line":47,"column":7,"nodeType":"177","messageId":"178","endLine":47,"endColumn":18},"react/no-danger","Dangerous property 'dangerouslySetInnerHTML' found","JSXAttribute","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'gameState' and 'state.geometry'. Either include them or remove the dependency array.","ArrayExpression",["259"],"@typescript-eslint/no-inferrable-types","Type number trivially inferred from a number literal, remove type annotation.","VariableDeclarator","noInferrableType",{"range":"260","text":"261"},"@typescript-eslint/no-unused-vars","'getNewStringValue' is assigned a value but never used.","Identifier","unusedVar","@typescript-eslint/no-use-before-define","'getMainDesc' was used before it was defined.","noUseBeforeDefine","'getVarsDesc' was used before it was defined.","'getActions' was used before it was defined.","'getObjects' was used before it was defined.","'type' is defined but never used.","'isShown' is defined but never used.","'listPtr' is defined but never used.","'count' is defined but never used.","'textPtr' is defined but never used.","@typescript-eslint/no-shadow","'onInput' is already declared in the upper scope.","noShadow","'ms' is defined but never used.","'pathPtr' is defined but never used.","'strPtr' is defined but never used.","'isNewGame' is defined but never used.","'filePtr' is defined but never used.","'volume' is defined but never used.","spaced-comment","Expected exception block, space or tab after '//' in comment.","Line","expectedExceptionAfter",{"range":"262","text":"263"},{"range":"264","text":"263"},"'getNewMainDesc' is assigned a value but never used.",{"range":"265","text":"263"},"'getLastError' was used before it was defined.","'getNewVarsDesc' is assigned a value but never used.",{"range":"266","text":"263"},{"range":"267","text":"263"},{"range":"268","text":"263"},{"range":"269","text":"263"},"'getNewActions' is assigned a value but never used.",{"range":"270","text":"263"},"'getNewObjects' is assigned a value but never used.",{"range":"271","text":"263"},"curly","Unnecessary { after 'if' condition.","IfStatement","unexpectedCurlyAfterCondition",{"range":"272","text":"273"},{"range":"274","text":"275"},"'useState' is defined but never used.","'el' is already declared in the upper scope.",{"range":"276","text":"277"},"no-param-reassign","Assignment to property of function parameter 'el'.","assignmentToFunctionParamProp","React Hook useEffect has missing dependencies: 'Time' and 'onClick'. Either include them or remove the dependency array.",["278"],"consistent-return","Expected to return a value at the end of arrow function.","ArrowFunctionExpression","missingReturn","default-case","Expected a default case.","SwitchStatement","missingDefaultCase",{"range":"279","text":"263"},{"range":"280","text":"263"},{"range":"281","text":"263"},{"range":"282","text":"263"},"'handler' is already declared in the upper scope.","'Howl' is defined but never used.","no-bitwise","Unexpected use of '&'.","BinaryExpression","unexpected","Unexpected use of '>>'.","'setUIProperties' is defined but never used.","@typescript-eslint/no-explicit-any","Unexpected any. Specify a different type.","TSAnyKeyword","unexpectedAny",["283","284"],"eqeqeq","Expected '===' and instead saw '=='.","'showMessage' is assigned a value but never used.",{"desc":"285","fix":"286"},[2207,2215],"",[9274,9274]," ",[9548,9548],[9904,9904],[10813,10813],[11298,11298],[11573,11573],[12672,12672],[13479,13479],[14820,14820],[15554,15619],"\n      throw new Error(`Error selection index: ${index}`);\n    ",[15774,15840],"\n      throw new Error(`Error executing action: ${index}`);\n    ",[1343,2285],"\n        Promise.any([\n          new Promise((resolve) => setTimeout(resolve, 50)),\n          ...Array.from(images).map((el) => {\n            return new Promise((resolve) => {\n              el.addEventListener(\"load\", resolve, { once: true });\n              el.addEventListener(\"error\", resolve, { once: true });\n            });\n          }),\n          ...Array.from(videos).map((el) => {\n            return new Promise((resolve) => {\n              el.preload = \"auto\";\n              el.addEventListener(\n                \"canplay\",\n                () => {\n                  el.play();\n                  resolve();\n                },\n                { once: true }\n              );\n              el.addEventListener(\"error\", resolve, { once: true });\n            });\n          }),\n        ]).then(() => {\n          content.current?.replaceChild(el, oldEl);\n          console.log(`Media load time: ${Date.now() - Time}ms`);\n        });\n      ",{"desc":"287","fix":"288"},[3841,3841],[3879,3879],[3943,3943],[3983,3983],{"messageId":"289","fix":"290","desc":"291"},{"messageId":"292","fix":"293","desc":"294"},"Update the dependencies array to be: [gameState, state.geometry]",{"range":"295","text":"296"},"Update the dependencies array to be: [Time, onClick, text]",{"range":"297","text":"298"},"suggestUnknown",{"range":"299","text":"300"},"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct.","suggestNever",{"range":"299","text":"301"},"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of.",[6014,6016],"[gameState, state.geometry]",[2402,2408],"[Time, onClick, text]",[577,580],"unknown","never"]